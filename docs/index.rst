.. BETY-BRAPI documentation master file, created by
   sphinx-quickstart on Tue Aug 14 15:23:49 2018.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

TERRA-REF Breeder's API 
=======================

Preliminary implementation of the Breeder's API for accessing the
TERRA-REF reference dataset, particulary data exposed through 
the BETY database.

A few things to note:

* Server is autogenerated using swagger-codegen based on v1.3 of the BRAPI Swagger specification
* Custom templates in the ``templates`` directory
* Implementations in ``bety_brapi/controllers_impl``  
* Uses ``sqlalchemy`` to interface with BETYdb

Generating the server
---------------------
The server is generated using the ``swagger-gen.sh``.  Ideally, this process is
not re-run unless the specification itself changes.

.. code-block::  bash

   docker run --rm -v ${PWD}:/local swaggerapi/swagger-codegen-cli generate \
       -i https://app.swaggerhub.com/apiproxy/schema/file/PlantBreedingAPI/BrAPI/1.3/swagger.json \
       -l python-flask \
       -c /local/config.json \
       -t /local/templates/flaskConnexion \
       -o /local

This runs the ``swagger-codegen-cli`` via Docker and generates stub files in the
``bety_brapi`` subdirectory based on configuration in ``config.json`` and the
templates in ``templates/flaskConnexion``.

The actual implementation is in ``bety_brapi/controllers_impl``, which is
currently limited to the ``/phenotypes-search`` call.


.. toctree::
   :maxdepth: 2
   :caption: Contents:



Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
